I began by setting up the foundational structure of your Django project, organizing it into three core applications: Accounts, Store, and Mpesa. Each app was designed to handle a distinct part of the platform — user management, product handling, and payment processing, respectively.
The Accounts app was implemented to manage user authentication, with a customized user model that uses a phone number instead of the traditional username. This choice was intentional to ensure seamless integration with M-Pesa, where transactions are inherently tied to mobile numbers. The registration and login processes were then built around this custom authentication system, allowing users to log in using just their phone numbers.
Next, the Store app was developed to handle everything related to products. A product model was created to store details such as name, description, price, and images. Administrative capabilities were enabled through the Django admin interface, allowing you to manage product entries conveniently. Views were created to support both the listing of products and individual product detail pages. On the product detail page, we included an “Order Now” button which would later be tied to the payment functionality.
For the Mpesa app, we focused on integrating Safaricom’s M-Pesa Daraja API, specifically the STK Push feature. This allows users to initiate payments directly from the website and receive a prompt on their phone to authorize the transaction. We implemented utility functions to generate the required access token using Safaricom credentials and to structure the STK push payload. Callback handling was also added to process responses from M-Pesa after a payment attempt.
Ultimately, the workflow we built allows a user to log in, browse products, and make a purchase by clicking a single button — receiving an STK push prompt on their phone without needing to input any additional information.
